

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>llvm-profdata - Profile data tool &#8212; LLVM 6 documentation</title>
    
    <link rel="stylesheet" href="../_static/llvm-theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="llvm-stress - generate random .ll files" href="llvm-stress.html" />
    <link rel="prev" title="llvm-cov - emit coverage information" href="llvm-cov.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head>
  <body>
<div class="logo">
  <a href="../index.html">
    <img src="../_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="llvm-stress.html" title="llvm-stress - generate random .ll files"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="llvm-cov.html" title="llvm-cov - emit coverage information"
             accesskey="P">previous</a> |</li>
  <li><a href="http://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="../index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">LLVM Command Guide</a> &#187;</li> 
      </ul>
    </div>


    <div class="document">
      <div class="documentwrapper">
          <div class="body" role="main">
            
  <div class="section" id="llvm-profdata-profile-data-tool">
<h1>llvm-profdata - Profile data tool<a class="headerlink" href="#llvm-profdata-profile-data-tool" title="Permalink to this headline">¶</a></h1>
<div class="section" id="synopsis">
<h2>SYNOPSIS<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<p><strong class="program">llvm-profdata</strong> <em>command</em> [<em>args…</em>]</p>
</div>
<div class="section" id="description">
<h2>DESCRIPTION<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The <strong class="program">llvm-profdata</strong> tool is a small utility for working with profile
data files.</p>
</div>
<div class="section" id="commands">
<h2>COMMANDS<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><a class="reference internal" href="#profdata-merge"><span class="std std-ref">merge</span></a></li>
<li><a class="reference internal" href="#profdata-show"><span class="std std-ref">show</span></a></li>
</ul>
</div>
<div class="section" id="merge">
<span id="profdata-merge"></span><h2>MERGE<a class="headerlink" href="#merge" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id1">
<h3>SYNOPSIS<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p><strong class="program">llvm-profdata merge</strong> [<em>options</em>] [<em>filename…</em>]</p>
</div>
<div class="section" id="id2">
<h3>DESCRIPTION<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p><strong class="program">llvm-profdata merge</strong> takes several profile data files
generated by PGO instrumentation and merges them together into a single
indexed profile data file.</p>
<p>By default profile data is merged without modification. This means that the
relative importance of each input file is proportional to the number of samples
or counts it contains. In general, the input from a longer training run will be
interpreted as relatively more important than a shorter run. Depending on the
nature of the training runs it may be useful to adjust the weight given to each
input file by using the <code class="docutils literal"><span class="pre">-weighted-input</span></code> option.</p>
<p>Profiles passed in via <code class="docutils literal"><span class="pre">-weighted-input</span></code>, <code class="docutils literal"><span class="pre">-input-files</span></code>, or via positional
arguments are processed once for each time they are seen.</p>
</div>
<div class="section" id="options">
<h3>OPTIONS<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-llvm-profdata-merge-help">
<code class="descname">-help</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-llvm-profdata-merge-help" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a summary of command line options.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-merge-output">
<code class="descname">-output</code><code class="descclassname">=output</code><code class="descclassname">, </code><code class="descname">-o</code><code class="descclassname">=output</code><a class="headerlink" href="#cmdoption-llvm-profdata-merge-output" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the output file name.  <em>Output</em> cannot be <code class="docutils literal"><span class="pre">-</span></code> as the resulting
indexed profile data can’t be written to standard output.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-merge-weighted-input">
<code class="descname">-weighted-input</code><code class="descclassname">=weight,filename</code><a class="headerlink" href="#cmdoption-llvm-profdata-merge-weighted-input" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify an input file name along with a weight. The profile counts of the
supplied <code class="docutils literal"><span class="pre">filename</span></code> will be scaled (multiplied) by the supplied
<code class="docutils literal"><span class="pre">weight</span></code>, where where <code class="docutils literal"><span class="pre">weight</span></code> is a decimal integer &gt;= 1.
Input files specified without using this option are assigned a default
weight of 1. Examples are shown below.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-merge-input-files">
<code class="descname">-input-files</code><code class="descclassname">=path</code><code class="descclassname">, </code><code class="descname">-f</code><code class="descclassname">=path</code><a class="headerlink" href="#cmdoption-llvm-profdata-merge-input-files" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify a file which contains a list of files to merge. The entries in this
file are newline-separated. Lines starting with ‘#’ are skipped. Entries may
be of the form &lt;filename&gt; or &lt;weight&gt;,&lt;filename&gt;.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-merge-instr">
<code class="descname">-instr</code><code class="descclassname"> (default)</code><a class="headerlink" href="#cmdoption-llvm-profdata-merge-instr" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify that the input profile is an instrumentation-based profile.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-merge-sample">
<code class="descname">-sample</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-llvm-profdata-merge-sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify that the input profile is a sample-based profile.</p>
<p>The format of the generated file can be generated in one of three ways:</p>
<dl class="option">
<dt id="cmdoption-llvm-profdata-merge-binary">
<code class="descname">-binary</code><code class="descclassname"> (default)</code><a class="headerlink" href="#cmdoption-llvm-profdata-merge-binary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Emit the profile using a binary encoding. For instrumentation-based profile
the output format is the indexed binary format.</p>
<dl class="option">
<dt id="cmdoption-llvm-profdata-merge-text">
<code class="descname">-text</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-llvm-profdata-merge-text" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Emit the profile in text mode. This option can also be used with both
sample-based and instrumentation-based profile. When this option is used
the profile will be dumped in the text format that is parsable by the profile
reader.</p>
<dl class="option">
<dt id="cmdoption-llvm-profdata-merge-gcc">
<code class="descname">-gcc</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-llvm-profdata-merge-gcc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Emit the profile using GCC’s gcov format (Not yet supported).</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-merge-sparse">
<code class="descname">-sparse[</code><code class="descclassname">=true|false]</code><a class="headerlink" href="#cmdoption-llvm-profdata-merge-sparse" title="Permalink to this definition">¶</a></dt>
<dd><p>Do not emit function records with 0 execution count. Can only be used in
conjunction with -instr. Defaults to false, since it can inhibit compiler
optimization during PGO.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-merge-num-threads">
<code class="descname">-num-threads</code><code class="descclassname">=N</code><code class="descclassname">, </code><code class="descname">-j</code><code class="descclassname">=N</code><a class="headerlink" href="#cmdoption-llvm-profdata-merge-num-threads" title="Permalink to this definition">¶</a></dt>
<dd><p>Use N threads to perform profile merging. When N=0, llvm-profdata auto-detects
an appropriate number of threads to use. This is the default.</p>
</dd></dl>

</div>
<div class="section" id="examples">
<h3>EXAMPLES<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<div class="section" id="basic-usage">
<h4>Basic Usage<a class="headerlink" href="#basic-usage" title="Permalink to this headline">¶</a></h4>
<p>Merge three profiles:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">llvm</span><span class="o">-</span><span class="n">profdata</span> <span class="n">merge</span> <span class="n">foo</span><span class="o">.</span><span class="n">profdata</span> <span class="n">bar</span><span class="o">.</span><span class="n">profdata</span> <span class="n">baz</span><span class="o">.</span><span class="n">profdata</span> <span class="o">-</span><span class="n">output</span> <span class="n">merged</span><span class="o">.</span><span class="n">profdata</span>
</pre></div>
</div>
</div>
<div class="section" id="weighted-input">
<h4>Weighted Input<a class="headerlink" href="#weighted-input" title="Permalink to this headline">¶</a></h4>
<p>The input file <cite>foo.profdata</cite> is especially important, multiply its counts by 10:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">llvm</span><span class="o">-</span><span class="n">profdata</span> <span class="n">merge</span> <span class="o">-</span><span class="n">weighted</span><span class="o">-</span><span class="nb">input</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">foo</span><span class="o">.</span><span class="n">profdata</span> <span class="n">bar</span><span class="o">.</span><span class="n">profdata</span> <span class="n">baz</span><span class="o">.</span><span class="n">profdata</span> <span class="o">-</span><span class="n">output</span> <span class="n">merged</span><span class="o">.</span><span class="n">profdata</span>
</pre></div>
</div>
<p>Exactly equivalent to the previous invocation (explicit form; useful for programmatic invocation):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">llvm</span><span class="o">-</span><span class="n">profdata</span> <span class="n">merge</span> <span class="o">-</span><span class="n">weighted</span><span class="o">-</span><span class="nb">input</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">foo</span><span class="o">.</span><span class="n">profdata</span> <span class="o">-</span><span class="n">weighted</span><span class="o">-</span><span class="nb">input</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">bar</span><span class="o">.</span><span class="n">profdata</span> <span class="o">-</span><span class="n">weighted</span><span class="o">-</span><span class="nb">input</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">baz</span><span class="o">.</span><span class="n">profdata</span> <span class="o">-</span><span class="n">output</span> <span class="n">merged</span><span class="o">.</span><span class="n">profdata</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="show">
<span id="profdata-show"></span><h2>SHOW<a class="headerlink" href="#show" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id3">
<h3>SYNOPSIS<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p><strong class="program">llvm-profdata show</strong> [<em>options</em>] [<em>filename</em>]</p>
</div>
<div class="section" id="id4">
<h3>DESCRIPTION<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p><strong class="program">llvm-profdata show</strong> takes a profile data file and displays the
information about the profile counters for this file and
for any of the specified function(s).</p>
<p>If <em>filename</em> is omitted or is <code class="docutils literal"><span class="pre">-</span></code>, then <strong>llvm-profdata show</strong> reads its
input from standard input.</p>
</div>
<div class="section" id="id5">
<h3>OPTIONS<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-llvm-profdata-show-all-functions">
<code class="descname">-all-functions</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-llvm-profdata-show-all-functions" title="Permalink to this definition">¶</a></dt>
<dd><p>Print details for every function.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-show-counts">
<code class="descname">-counts</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-llvm-profdata-show-counts" title="Permalink to this definition">¶</a></dt>
<dd><p>Print the counter values for the displayed functions.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-show-function">
<code class="descname">-function</code><code class="descclassname">=string</code><a class="headerlink" href="#cmdoption-llvm-profdata-show-function" title="Permalink to this definition">¶</a></dt>
<dd><p>Print details for a function if the function’s name contains the given string.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-show-help">
<code class="descname">-help</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-llvm-profdata-show-help" title="Permalink to this definition">¶</a></dt>
<dd><p>Print a summary of command line options.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-show-output">
<code class="descname">-output</code><code class="descclassname">=output</code><code class="descclassname">, </code><code class="descname">-o</code><code class="descclassname">=output</code><a class="headerlink" href="#cmdoption-llvm-profdata-show-output" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify the output file name.  If <em>output</em> is <code class="docutils literal"><span class="pre">-</span></code> or it isn’t specified,
then the output is sent to standard output.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-show-instr">
<code class="descname">-instr</code><code class="descclassname"> (default)</code><a class="headerlink" href="#cmdoption-llvm-profdata-show-instr" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify that the input profile is an instrumentation-based profile.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-show-text">
<code class="descname">-text</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-llvm-profdata-show-text" title="Permalink to this definition">¶</a></dt>
<dd><p>Instruct the profile dumper to show profile counts in the text format of the
instrumentation-based profile data representation. By default, the profile
information is dumped in a more human readable form (also in text) with
annotations.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-show-topn">
<code class="descname">-topn</code><code class="descclassname">=n</code><a class="headerlink" href="#cmdoption-llvm-profdata-show-topn" title="Permalink to this definition">¶</a></dt>
<dd><p>Instruct the profile dumper to show the top <code class="docutils literal"><span class="pre">n</span></code> functions with the
hottest basic blocks in the summary section. By default, the topn functions
are not dumped.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-show-sample">
<code class="descname">-sample</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-llvm-profdata-show-sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify that the input profile is a sample-based profile.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-llvm-profdata-show-memop-sizes">
<code class="descname">-memop-sizes</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-llvm-profdata-show-memop-sizes" title="Permalink to this definition">¶</a></dt>
<dd><p>Show the profiled sizes of the memory intrinsic calls for shown functions.</p>
</dd></dl>

</div>
</div>
<div class="section" id="exit-status">
<h2>EXIT STATUS<a class="headerlink" href="#exit-status" title="Permalink to this headline">¶</a></h2>
<p><strong class="program">llvm-profdata</strong> returns 1 if the command is omitted or is invalid,
if it cannot read input files, or if there is a mismatch between their data.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="llvm-stress.html" title="llvm-stress - generate random .ll files"
             >next</a> |</li>
        <li class="right" >
          <a href="llvm-cov.html" title="llvm-cov - emit coverage information"
             >previous</a> |</li>
  <li><a href="http://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="../index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="index.html" >LLVM Command Guide</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2003-2019, LLVM Project.
      Last updated on Wed Feb 13 10:08:12 2019 -0800.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.1.
    </div>
  </body>
</html>